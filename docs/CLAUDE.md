# Claude AIåŠ©æ‰‹æŒ‡å—

## ğŸ¤– é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯å¯å¯è¥¿é‡Œç½‘çº¢ç‹¼å…¬ç›Šç½‘ç«™é¡¹ç›®ï¼Œä¸€ä¸ªåŸºäºNext.js 14çš„å…¬ç›Šç­¹æ¬¾å¹³å°ï¼Œä¸“æ³¨äºç§‘å­¦ä¿æŠ¤å’Œç§‘å­¦çˆ±æŠ¤é‡ç”ŸåŠ¨ç‰©ï¼Œç‰¹åˆ«å…³æ³¨ç½‘çº¢ç‹¼çš„æ•…äº‹å’Œä¿æŠ¤å·¥ä½œã€‚

### é¡¹ç›®æ ¸å¿ƒä¿¡æ¯
- **é¡¹ç›®åç§°**: å¯å¯è¥¿é‡Œç½‘çº¢ç‹¼å…¬ç›Šç½‘ç«™
- **é¡¹ç›®ç±»å‹**: å…¬ç›Šç­¹æ¬¾ + æ•™è‚²å¹³å°
- **æ ¸å¿ƒä»·å€¼è§‚**: ç§‘å­¦ä¿æŠ¤ã€ç§‘å­¦çˆ±æŠ¤ï¼ˆä¸æ”¯æŒä¸åå¯¹æŠ•å–‚è¡Œä¸ºï¼‰
- **ç›®æ ‡ç”¨æˆ·**: å…³æ³¨é‡ç”ŸåŠ¨ç‰©ä¿æŠ¤çš„å…¬ä¼—ã€æèµ è€…ã€ä¿æŠ¤å·¥ä½œè€…

## ğŸ¯ Claudeçš„å·¥ä½œèŒè´£

### ä¸»è¦èŒè´£
1. **ä»£ç å¼€å‘**: æŒ‰ç…§æŠ€æœ¯è§„èŒƒå¼€å‘æ–°åŠŸèƒ½
2. **æŠ€æœ¯æ”¯æŒ**: è§£ç­”æŠ€æœ¯é—®é¢˜å’Œæä¾›è§£å†³æ–¹æ¡ˆ
3. **æ¶æ„ä¼˜åŒ–**: æå‡ºç³»ç»Ÿæ”¹è¿›å»ºè®®
4. **æ–‡æ¡£ç»´æŠ¤**: ä¿æŒæŠ€æœ¯æ–‡æ¡£çš„å‡†ç¡®æ€§å’Œå®Œæ•´æ€§
5. **ä»£ç å®¡æŸ¥**: ç¡®ä¿ä»£ç è´¨é‡å’Œå®‰å…¨æ€§

### å·¥ä½œåŸåˆ™
- ğŸ¯ **ç›®æ ‡å¯¼å‘**: å§‹ç»ˆå›´ç»•é¡¹ç›®ç›®æ ‡å·¥ä½œ
- ğŸ”’ **å®‰å…¨ç¬¬ä¸€**: ä¸¥æ ¼éµå¾ªå®‰å…¨æœ€ä½³å®è·µ
- ğŸ“š **æ–‡æ¡£ä¼˜å…ˆ**: é‡è¦å†³ç­–å’Œé…ç½®éƒ½è¦æœ‰æ–‡æ¡£è®°å½•
- ğŸ§ª **æµ‹è¯•æ€ç»´**: è€ƒè™‘åŠŸèƒ½çš„å¯æµ‹è¯•æ€§å’Œè¾¹ç•Œæƒ…å†µ
- ğŸš€ **æ€§èƒ½æ„è¯†**: å…³æ³¨ä»£ç æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

## ğŸ› ï¸ æŠ€æœ¯æ ˆè¯¦è§£

### å‰ç«¯æŠ€æœ¯
- **Next.js 14**: ä½¿ç”¨App Routerï¼Œæ”¯æŒSSRå’Œé™æ€ç”Ÿæˆ
- **TypeScript**: ä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼Œæé«˜ä»£ç è´¨é‡
- **Tailwind CSS**: åŸå­åŒ–CSSï¼Œå¿«é€Ÿå¼€å‘å“åº”å¼ç•Œé¢
- **React Hook Form**: é«˜æ€§èƒ½è¡¨å•å¤„ç†
- **Framer Motion**: åŠ¨ç”»å’Œäº¤äº’æ•ˆæœ

### åç«¯æŠ€æœ¯
- **Next.js API Routes**: æœåŠ¡ç«¯APIå¼€å‘
- **Supabase**: æ•°æ®åº“ + è®¤è¯ + å®æ—¶åŠŸèƒ½
- **Drizzle ORM**: ç±»å‹å®‰å…¨çš„æ•°æ®åº“æ“ä½œ
- **Creem**: æ”¯ä»˜å¤„ç†å’ŒWebhook

### å¼€å‘å·¥å…·
- **ESLint + Prettier**: ä»£ç æ ¼å¼åŒ–å’Œè§„èŒƒ
- **TypeScript**: ç±»å‹æ£€æŸ¥å’Œå¼€å‘ä½“éªŒ

## ğŸ“ é¡¹ç›®å…³é”®æ–‡ä»¶ä½ç½®

```
src/
â”œâ”€â”€ app/                    # Next.jsé¡µé¢ (App Router)
â”‚   â”œâ”€â”€ page.tsx           # é¦–é¡µ
â”‚   â”œâ”€â”€ donate/            # æèµ é¡µé¢
â”‚   â”œâ”€â”€ about/             # å…³äºé¡µé¢
â”‚   â””â”€â”€ admin/             # ç®¡ç†åå°
â”œâ”€â”€ components/            # Reactç»„ä»¶
â”‚   â”œâ”€â”€ ui/               # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ donation/         # æèµ ç›¸å…³ç»„ä»¶
â”‚   â””â”€â”€ layout/           # å¸ƒå±€ç»„ä»¶
â”œâ”€â”€ api/                  # APIè·¯ç”±
â”‚   â”œâ”€â”€ creem/           # Creemæ”¯ä»˜API
â”‚   â”œâ”€â”€ donations/       # æèµ æ•°æ®API
â”‚   â””â”€â”€ admin/           # ç®¡ç†API
â”œâ”€â”€ lib/                  # å·¥å…·å‡½æ•°åº“
â”œâ”€â”€ types/                # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ hooks/                # React Hooks

drizzle/
â”œâ”€â”€ schema.ts             # æ•°æ®åº“æ¨¡å¼å®šä¹‰
â””â”€â”€ migrations/           # æ•°æ®åº“è¿ç§»æ–‡ä»¶

docs/                     # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ CLAUDE.md            # æœ¬æ–‡æ¡£
```

## ğŸ”§ å¸¸ç”¨å¼€å‘å‘½ä»¤

```bash
# å¼€å‘ç›¸å…³
npm run dev              # å¯åŠ¨å¼€å‘æœåŠ¡å™¨ (localhost:3000)
npm run build           # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start           # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
npm run lint            # ä»£ç æ£€æŸ¥
npm run lint:fix        # è‡ªåŠ¨ä¿®å¤ä»£ç é—®é¢˜

# æ•°æ®åº“ç›¸å…³
npx drizzle-kit studio  # æ•°æ®åº“å¯è§†åŒ–ç®¡ç†
npx drizzle-kit generate # ç”Ÿæˆè¿ç§»æ–‡ä»¶
npx drizzle-kit migrate # è¿è¡Œæ•°æ®åº“è¿ç§»
# éƒ¨ç½²ç›¸å…³
npm run build           # æ„å»ºé¡¹ç›®
```

## ğŸ¨ å¼€å‘è§„èŒƒ

### ä»£ç é£æ ¼
- **TypeScriptä¼˜å…ˆ**: æ‰€æœ‰æ–°ä»£ç å¿…é¡»ä½¿ç”¨TypeScript
- **ç»„ä»¶å‘½å**: ä½¿ç”¨PascalCase (å¦‚ `DonationForm.tsx`)
- **å‡½æ•°å‘½å**: ä½¿ç”¨camelCase (å¦‚ `handleSubmitPayment`)
- **å¸¸é‡å‘½å**: ä½¿ç”¨UPPER_SNAKE_CASE (å¦‚ `API_BASE_URL`)
- **æ–‡ä»¶å‘½å**: ä½¿ç”¨kebab-case (å¦‚ `donation-form.tsx`)

### ç»„ä»¶å¼€å‘è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„ç»„ä»¶ç»“æ„
interface DonationFormProps {
  amount: number
  onSuccess: () => void
}

export default function DonationForm({ amount, onSuccess }: DonationFormProps) {
  const [isLoading, setIsLoading] = useState(false)

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setIsLoading(true)
    try {
      // å¤„ç†é€»è¾‘
      onSuccess()
    } catch (error) {
      console.error('Payment failed:', error)
    } finally {
      setIsLoading(false)
    }
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      {/* ç»„ä»¶å†…å®¹ */}
    </form>
  )
}
```

### APIè·¯ç”±è§„èŒƒ
```typescript
// âœ… æ­£ç¡®çš„APIè·¯ç”±ç»“æ„
import { NextRequest, NextResponse } from 'next/server'
import { z } from 'zod'

const RequestSchema = z.object({
  amount: z.number().min(1),
  email: z.string().email()
})

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const validatedData = RequestSchema.parse(body)

    // å¤„ç†é€»è¾‘

    return NextResponse.json({ success: true })
  } catch (error) {
    return NextResponse.json(
      { error: 'Invalid request' },
      { status: 400 }
    )
  }
}
```

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

### æ°¸è¿œä¸è¦åšçš„äº‹æƒ…
1. âŒ æäº¤APIå¯†é’¥åˆ°ä»£ç ä»“åº“
2. âŒ åœ¨å®¢æˆ·ç«¯æš´éœ²æ•æ„Ÿä¿¡æ¯
3. âŒ ç›´æ¥ä½¿ç”¨ç”¨æˆ·è¾“å…¥è¿›è¡Œæ•°æ®åº“æŸ¥è¯¢
4. âŒ å¿½ç•¥è¾“å…¥éªŒè¯å’Œæ¸…ç†
5. âŒ åœ¨ç”Ÿäº§ç¯å¢ƒè¾“å‡ºæ•æ„Ÿæ—¥å¿—

### å¿…é¡»åšçš„äº‹æƒ…
1. âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†æ•æ„Ÿä¿¡æ¯
2. âœ… éªŒè¯æ‰€æœ‰ç”¨æˆ·è¾“å…¥
3. âœ… ä½¿ç”¨HTTPSè¿›è¡Œæ•°æ®ä¼ è¾“
4. âœ… å®æ–½é€‚å½“çš„é”™è¯¯å¤„ç†
5. âœ… å®šæœŸæ›´æ–°ä¾èµ–åŒ…

### å…³é”®å®‰å…¨æ£€æŸ¥ç‚¹
- **APIå¯†é’¥**: ç¡®ä¿æ‰€æœ‰APIå¯†é’¥éƒ½åœ¨ `.env.local` ä¸­
- **è¾“å…¥éªŒè¯**: ä½¿ç”¨Zodæˆ–ç±»ä¼¼åº“éªŒè¯APIè¾“å…¥
- **CORSé…ç½®**: æ­£ç¡®é…ç½®è·¨åŸŸè®¿é—®ç­–ç•¥
- **è®¤è¯æ£€æŸ¥**: ç¡®ä¿æ•æ„ŸAPIæœ‰é€‚å½“çš„è®¤è¯
- **SQLæ³¨å…¥**: ä½¿ç”¨Drizzle ORMé¿å…SQLæ³¨å…¥

## ğŸš¨ å¸¸è§é—®é¢˜å¤„ç†

### å¼€å‘ç¯å¢ƒé—®é¢˜
```bash
# ç«¯å£è¢«å ç”¨
lsof -ti:3000 | xargs kill -9

# ä¾èµ–å®‰è£…å¤±è´¥
rm -rf node_modules package-lock.json
npm install

# Drizzleé—®é¢˜
npx drizzle-kit generate
npx drizzle-kit migrate
```

### æ„å»ºé—®é¢˜
```bash
# TypeScripté”™è¯¯
npm run build -- --no-lint

# å†…å­˜ä¸è¶³
export NODE_OPTIONS="--max-old-space-size=4096"
npm run build
```

### è°ƒè¯•æŠ€å·§
```typescript
// ä½¿ç”¨console.logè¿›è¡Œè°ƒè¯•
console.log('Debug info:', { data, error })

// ä½¿ç”¨debuggeræ–­ç‚¹
debugger

// ä½¿ç”¨React DevTools
// å®‰è£…æµè§ˆå™¨æ‰©å±•è¿›è¡Œç»„ä»¶è°ƒè¯•
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–æŒ‡å—

### å‰ç«¯ä¼˜åŒ–
- ä½¿ç”¨ `next/dynamic` è¿›è¡Œä»£ç åˆ†å‰²
- ä¼˜åŒ–å›¾ç‰‡ä½¿ç”¨ `next/image`
- å®æ–½é€‚å½“çš„ç¼“å­˜ç­–ç•¥
- ä½¿ç”¨ React.memo é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

### åç«¯ä¼˜åŒ–
- ä½¿ç”¨é€‚å½“çš„ç¼“å­˜æœºåˆ¶
- ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢
- å®æ–½APIé™æµ
- ç›‘æ§APIå“åº”æ—¶é—´

## ğŸ”„ æ•°æ®åº“æ“ä½œæœ€ä½³å®è·µ

### Drizzleä½¿ç”¨è§„èŒƒ
```typescript
// âœ… ä½¿ç”¨äº‹åŠ¡å¤„ç†å¤æ‚æ“ä½œ
await db.transaction(async (tx) => {
  await tx.insert(donations).values(data)
  await tx.update(projectStats).set(updateData)
})

// âœ… ä½¿ç”¨selectä¼˜åŒ–æŸ¥è¯¢
const user = await db.query.users.findFirst({
  where: eq(users.id, id),
  columns: { name: true, email: true }
})

// âœ… å¤„ç†æ•°æ®åº“é”™è¯¯
try {
  const result = await db.insert(donations).values(data)
} catch (error) {
  if (error instanceof DrizzleError) {
    // å¤„ç†ç‰¹å®šçš„Drizzleé”™è¯¯
  }
}
```

## ğŸ“§ è”ç³»å’Œæ”¯æŒ

å¦‚æœé‡åˆ°æ— æ³•è§£å†³çš„é—®é¢˜ï¼š
1. æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ (`docs/` ç›®å½•)
2. æ£€æŸ¥GitHub Issues
3. è”ç³»é¡¹ç›®ç»´æŠ¤è€…

## ğŸ“ å¼€å‘è®°å½•

åœ¨é‡è¦å˜æ›´æ—¶ï¼Œè¯·æ›´æ–°æœ¬æ–‡æ¡£ï¼š
- æ–°å¢æŠ€æœ¯æ ˆæˆ–å·¥å…·
- ä¿®æ”¹å¼€å‘è§„èŒƒ
- æ›´æ–°å®‰å…¨æ³¨æ„äº‹é¡¹
- æ·»åŠ æ–°çš„æœ€ä½³å®è·µ

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
**æœ€åæ›´æ–°**: 2024å¹´1æœˆ
**ç»´æŠ¤è€…**: Claude AIåŠ©æ‰‹